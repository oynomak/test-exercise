<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<link rel="stylesheet" type="text/css" href="myStyle.css">
		<script>
			var app = new function(){
					// Just testing...
				// alert("Inside my App");

				/* Initializing the records by some random data */
				this.myRecords = [
					{firstName: "Mugabo", lastName: "Kamonyo", sex: "Male", age: 42, city: "Kigali", country: "Rwanda", hasDiabetes: "No"},
				  	{firstName: "Mary", lastName: "Johnson", sex: "Female", age: 2, city: "Bujumbura", country: "Burundi", hasDiabetes: "No"},
				  	{firstName: "John", lastName: "Doe", sex: "Male", age: 22, city: "Abidjan", country: "Cote d'Ivoire", hasDiabetes: "Yes"},
				  	{firstName: "Herve", lastName: "Richard", sex: "Male", age: 4, city: "Lagos", country: "Nigeria", hasDiabetes: "No"}	
				];

				/* Adding a new Record from Form in the page */
				this.Add = function(){
					// Just testing...
					// alert(this.myRecords.length);

				 	/* Get the new Record: */
					var newRecord;

					// Getting sex info...
				 	var sex = "-";
				 	if (document.getElementById("male").checked) {
					  sex = document.getElementById("male").value;
					}else if (document.getElementById("female").checked) {
					  sex = document.getElementById("female").value;
					}
					// Getting diabete info...
					var diabete = "-";
				 	if (document.getElementById("yes").checked) {
					  diabete = document.getElementById("yes").value;
					}else if (document.getElementById("no").checked) {
					  diabete = document.getElementById("no").value;
					}else if (document.getElementById("unknown").checked) {
					  diabete = document.getElementById("unknown").value;
					}

				 	newRecord = {
						firstName: document.getElementById("first_name").value,
						lastName: document.getElementById("last_name").value,
						sex: sex,
						age: document.getElementById("age").value,
						city: document.getElementById("city").value,
						country: document.getElementById("country").value,
						hasDiabetes: diabete
					};

				 	if (newRecord.firstName && newRecord.lastName && age) {
					  	// Add the new value
					  	
					  	this.myRecords.push(newRecord);
					  	// Reset form's values
					  	//resetFields();
					  	// Dislay the new list
					  	this.FetchAll();
					}

				};

				/* Fetching throught the list of records */
				this.FetchAll = function() {
					// Just testing...
					alert(this.myRecords.length);
				};

			};
		</script>
		<title>Records</title>
	</head>
	<body>
		<div id="myFormSection">
			<h2>New Medical Record</h2>
			<form action="javascript:void(0);" method="post" onsubmit="app.Add()">
				<table>
					<tr>
						<td><input type="text" id="first_name" name="firstname" placeholder="First name"/></td>
						<td><input type="text" id="last_name" name="lastname" placeholder="Last name"/></td>
					</tr>
					<tr>
						<td>
							<input type="radio" id="male" name="gender" value="Male">
							<label for="male">Male</label>
							<input type="radio" id="female" name="gender" value="Female">
							<label for="female">Female</label>
						</td>
						<td><input type="number" id="age" name="age" placeholder="Age" min="0" max="150"/></td>
					</tr>
					<tr>
						<td>
							<select id="city">
								<option value="">City</option>
								<option value="Kigali">Kigali</option>
								<option value="Bujumbura">Bujumbura</option>
								<option value="Abidjan">Abidjan</option>
								<option value="Lagos">Lagos</option>
							</select>
						</td>
						<td>
							<select id="country">
								<option value="">Country</option>
								<option value="Rwanda">Rwanda</option>
								<option value="Burundi">Burundi</option>
								<option value="Cote d'Ivoire">Cote d'Ivoire</option>
								<option value="Nigeria">Nigeria</option>
							</select>
						</td>
					</tr>
					<tr>
						<td>Living with Diabetes?</td>
						<td>
							<input type="radio" id="yes" name="has_diabates" value="Yes">
							<label for="yes">Yes</label>
							<input type="radio" id="no" name="has_diabates" value="No">
							<label for="no">No</label>
							<input type="radio" id="unknown" name="has_diabates" value="Unknown">
							<label for="unknown">Unknown</label>
						</td>
					</tr>
					<tr id="submitBtn">
						<td></td>
						<td><input type="submit" id="save_record" value="SAVE" /></td>
					</tr>
				</table>
			</form>
		</div>
		<br><hr><br>
		<div id="myRecordsSection">
			<table>
				<tr>
					<td><h3>List of medical records</h3></td>
					<td><input type="checkbox" name="mineur" onchange="app.FetchAll()" id="mineur"/><label id="under18" for="mineur">Only minors</label></td>
				</tr>
				<tbody id="records">
				</tbody>
			</table>
		</div>
	</body>
</html>